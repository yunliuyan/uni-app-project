{"version":3,"sources":["webpack:///D:/yunliuyan/HBuilderx/uni-app/feike/App.vue?6001","webpack:///D:/yunliuyan/HBuilderx/uni-app/feike/App.vue?dff3","webpack:///D:/yunliuyan/HBuilderx/uni-app/feike/App.vue?f487","webpack:///D:/yunliuyan/HBuilderx/uni-app/feike/App.vue?02f5","webpack:///D:/yunliuyan/HBuilderx/uni-app/feike/App.vue"],"names":["regeneratorRuntime","require","setStorage","getStorage","AUTH","request","LOGIN_TOKEN_REFRESH","LOGIN_OPENID_REFRESH","globalData","fm","hasRefresh","methods","canIuse","$options","getFrom","path","query","key","indexOf","handleLogin","isLogin","tempToken","refreshToken","method","url","needToken","showLoading","hideLoading","showErrorModal","errorText","catch","err","console","log","res","token","openId","returnHeader","data","uni","reLaunch","success","pages","getCurrentPages","length","currentPage","onLoad","fail","switchTab","onLaunch","options","sysInfo","wx","getSystemInfoSync","screenWidth","screenHeight","screenHeightRpx","perRpx","onShow","onHide"],"mappings":"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","file":"common/main.js","sourcesContent":["import mod from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin","var render, staticRenderFns\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\yunliuyan\\\\HBuilderx\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('45c3c62d', component.options)\n    } else {\n      api.reload('45c3c62d', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"uni-app/feike/App.vue\"\nexport default component.exports","import mod from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","\nconst regeneratorRuntime = require('./utils/regenerator-runtime/runtime.js')\nconst {\n\tsetStorage,\n\tgetStorage\n} = require('./utils/storage.js')\nconst {\n\tAUTH\n} = require('./config/router.js')\nconst {\n\trequest\n} = require('./config/http.js')\nconst {\n\tLOGIN_TOKEN_REFRESH,\n\tLOGIN_OPENID_REFRESH\n} = require('./config/api.js')\nexport default {\n\tglobalData: {\n\t\tfm: '',\n\t\thasRefresh: true,\n\t},\n\tmethods: {\n\t\tcanIuse: function() {\n\t\t\treturn getStorage('isLogin') && this.$options.globalData.hasRefresh\n\t\t},\n\t\tgetFrom: function(path, query) {\n\t\t\tfor (let key in query) {\n\t\t\t\tpath += path.indexOf('?') === -1 ? '?' : '&'\n\t\t\t\tpath += `${key}=${query[key]}`\n\t\t\t}\n\t\t\tthis.$options.globalData.fm = `/${path}`\n\t\t},\n\t\thandleLogin: async function() {\n\t\t\t//先要确保跳转的页面不请求接口\n\t\t\tthis.$options.globalData.hasRefresh = false\n\t\t\tconst isLogin = getStorage('isLogin')\n\t\t\tif (isLogin) {\n\t\t\t\tlet tempToken = ''\n\n\t\t\t\t//基于refreshToken的tempToken的刷新\n\t\t\t\tconst refreshToken = getStorage('refreshToken')\n\t\t\t\tconst res = await request({\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\turl: `${LOGIN_TOKEN_REFRESH}?refreshToken=${refreshToken}`,\n\t\t\t\t\tneedToken: false,\n\t\t\t\t\tshowLoading: false,\n\t\t\t\t\thideLoading: false,\n\t\t\t\t\tshowErrorModal: false,\n\t\t\t\t\terrorText: 'refreshToken刷新失败'\n\t\t\t\t}).catch(err => console.log(err))\n\t\t\t\tif (res) {\n\t\t\t\t\ttempToken = res.token\n\t\t\t\t} else {\n\t\t\t\t\t//基于openId的tempToken刷新\n\t\t\t\t\tconst {\n\t\t\t\t\t\topenId\n\t\t\t\t\t} = getStorage('userInfo');\n\t\t\t\t\tconst {\n\t\t\t\t\t\tdata\n\t\t\t\t\t} = await request({\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\turl: `${LOGIN_OPENID_REFRESH}?openId=${openId}`,\n\t\t\t\t\t\tneedToken: false,\n\t\t\t\t\t\tshowLoading: false,\n\t\t\t\t\t\thideLoading: false,\n\t\t\t\t\t\tshowErrorModal: false,\n\t\t\t\t\t\terrorText: 'openId刷新失败',\n\t\t\t\t\t\treturnHeader: true\n\t\t\t\t\t}).catch(err => console.log(err))\n\t\t\t\t\ttempToken = data.token\n\t\t\t\t\tsetStorage('refreshToken', data.refreshToken)\n\t\t\t\t}\n\t\t\t\tsetStorage('tempToken', tempToken)\n\t\t\t\t//跳转相对应的页面\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: this.$options.globalData.fm,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tthis.$options.globalData.hasRefresh = true;\n\t\t\t\t\t\tvar pages = getCurrentPages()\n\t\t\t\t\t\tif (pages.length) {\n\t\t\t\t\t\t\tvar currentPage = pages[pages.length - 1]\n\t\t\t\t\t\t\tcurrentPage.onLoad()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\turl: this.$options.globalData.fm,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tthis.$options.globalData.hasRefresh = true;\n\t\t\t\t\t\t\t\tvar pages = getCurrentPages()\n\t\t\t\t\t\t\t\tif (pages.length) {\n\t\t\t\t\t\t\t\t\tvar currentPage = pages[pages.length - 1]\n\t\t\t\t\t\t\t\t\tcurrentPage.onLoad()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: AUTH,\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n\tonLaunch: function(options) {\n\t\tlet globalData = this.$options.data;\n\t\tif (!getStorage('sysInfo', true)) {\n\t\t\tconst sysInfo = wx.getSystemInfoSync()\n\t\t\tconst {\n\t\t\t\tscreenWidth,\n\t\t\t\tscreenHeight\n\t\t\t} = sysInfo\n\t\t\tsysInfo.screenHeightRpx = 750 * screenHeight / screenWidth\n\t\t\tsysInfo.perRpx = screenWidth / 750\n\t\t\tsetStorage('sysInfo', sysInfo)\n\t\t}\n\n\t\t//获得启动项目的路径\n\t\tconst {\n\t\t\tpath,\n\t\t\tquery\n\t\t} = options\n\t\tthis.getFrom(path, query)\n\n\t\t//处理token\n\t\t//this.handleLogin();\n\t},\n\tonShow: function() {\n\n\t},\n\tonHide: function() {\n\n\t}\n};\n"],"sourceRoot":""}